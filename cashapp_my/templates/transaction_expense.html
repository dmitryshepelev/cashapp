<div>
	<h5 class="modal-title">
		[[ 'expense_transaction' | translate ]]
		<span>
			<button type="button" class="btn btn-link" ng-click="createTransaction()">
				<span class="lnr lnr-plus-circle"></span> [[ 'create' | translate ]]
			</button>
		</span>
		<span class="pull-sm-right">
			<button type="button" class="btn btn-link" ui-sref="my.po.details({ guid: po.guid })">
				<span class="lnr lnr-cross"></span>
			</button>
		</span>
	</h5>
</div>

<form novalidate name="transactionForm">
	<div class="row">
		<div class="col-md-6">
			<div class="row">
				<div class="col-xs-12">
					<div class="form-group">
						<label class="form-control-label">[[ 'date' | translate ]]:</label>
		                <datetimepicker ng-model="transaction.date"></datetimepicker>
					</div>
				</div>
				<div class="col-xs-12">
					<div class="form-group">
						<label class="form-control-label">[[ 'supplier' | translate ]]</label>
						<input class="form-control form-control-sm"
						       ng-model="transaction.supplier"
						       typeahead-no-results="supplierNoResults"
						       typeahead-template-url="supplierTypeaheadTemplate"
						       ng-model-options="{ debounce: 1000 }"
						       uib-typeahead="supplier as supplier.name for supplier in loadSuppliers($viewValue)"
						       required name="supplier" autocomplete="off">
						<span class="no-result" ng-if="supplierNoResults">[[ 'nothing_is_found' | translate ]]</span>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<div class="form-group">
						<label class="form-control-label">[[ 'description' | translate ]]:</label>
						<textarea class="form-control form-control-sm" ng-model="transaction.description" maxlength="1000"></textarea>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="row">
				<div class="col-xs-12">
					<div class="form-group">
						<label class="form-control-label">[[ 'expense_item_title' | translate ]]</label>
						<input class="form-control form-control-sm"
						       ng-model="newExpenseItem"
						       typeahead-no-results="expenseItemNoResults"
						       typeahead-template-url="expenseItemTypeaheadTemplate"
						       ng-model-options="{ debounce: 1000 }"
						       uib-typeahead="expenseItem as expenseItem.name for expenseItem in loadExpenseItems($viewValue)"
						       typeahead-on-select="onNewExpenseItemSelect($item, $model, $label, $event)"
						       name="expenseItem" autocomplete="off">
						<span class="no-result" ng-if="expenseItemNoResults">[[ 'nothing_is_found' | translate ]]</span>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<div class="row small" ng-repeat="expenseItem in transaction.expense_items track by expenseItem.guid">
						<div class="form-group">
							<div class="col-sm-4">[[ expenseItem.category.name ]] [[ expenseItem.name ]]</div>
							<div class="col-sm-3"><money-input name="value" ng-model="expenseItem.price" currency="expenseItem.currency"></money-input></div>
							<div class="col-sm-2"><input class="form-control col-sm-1 form-control-sm" ng-model="expenseItem.count" /></div>
							<div class="col-sm-3"><money-input name="value" ng-model="expenseItem.price * expenseItem.count" currency="expenseItem.currency"></money-input></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</form>